---
allowed-tools: Bash, Glob, Grep, Read
description: Find and analyze duplicate code patterns
argument-hint: [all|functions|strings|imports|blocks] (default: all)
---

# ì¤‘ë³µ ì½”ë“œ íƒì§€ ë° ë¶„ì„

í”„ë¡œì íŠ¸ ë‚´ **ì¤‘ë³µë˜ëŠ” ì½”ë“œ íŒ¨í„´**ì„ ì°¾ì•„ ë¦¬íŒ©í† ë§ ëŒ€ìƒì„ ì œì‹œí•©ë‹ˆë‹¤.

## ì‚¬ìš©ë²•

```bash
/code:duplicate              # ì „ì²´ ì¤‘ë³µ ë¶„ì„ (ê¸°ë³¸ê°’)
/code:duplicate all          # ëª¨ë“  ì¢…ë¥˜ ì¤‘ë³µ íƒì§€
/code:duplicate functions    # í•¨ìˆ˜ëª…/ë©”ì„œë“œ ì¤‘ë³µ
/code:duplicate strings      # ë§¤ì§ ë¬¸ìì—´ ì¤‘ë³µ
/code:duplicate imports      # import íŒ¨í„´ ì¤‘ë³µ
/code:duplicate blocks       # ì½”ë“œ ë¸”ë¡ êµ¬ì¡° ì¤‘ë³µ
```

## ë¶„ì„ í•­ëª©

### 1ï¸âƒ£ **í•¨ìˆ˜ëª… ì¤‘ë³µ** (functions)
- ê°™ì€ ì´ë¦„ì˜ í•¨ìˆ˜/ë©”ì„œë“œ ì—¬ëŸ¬ íŒŒì¼ì— ì¡´ì¬
- ìƒì„±ì, ì´ˆê¸°í™” í•¨ìˆ˜ ë“± ë°˜ë³µë˜ëŠ” ì´ë¦„

### 2ï¸âƒ£ **ë§¤ì§ ë¬¸ìì—´/ìˆ«ì** (strings)
- í•˜ë“œì½”ë”©ëœ ìƒìˆ˜ (URL, ìƒ‰ìƒ, ë©”ì‹œì§€ ë“±)
- ì—¬ëŸ¬ íŒŒì¼ì—ì„œ ë°˜ë³µë˜ëŠ” ê°’
- ì¤‘ì•™í™” í•„ìš”ì„± íŒë‹¨

### 3ï¸âƒ£ **import íŒ¨í„´** (imports)
- í•­ìƒ í•¨ê»˜ importë˜ëŠ” ëª¨ë“ˆë“¤
- ë²ˆë“¤ í¬ê¸° ìµœì í™” ê¸°íšŒ
- ì˜ì¡´ì„± ì •ë¦¬ í•„ìš” ì—¬ë¶€

### 4ï¸âƒ£ **ì½”ë“œ ë¸”ë¡ êµ¬ì¡°** (blocks)
- ê°™ì€ êµ¬ì¡°ì˜ ë°˜ë³µ ë¡œì§
- í•¨ìˆ˜ ì¶”ìƒí™” ê¸°íšŒ
- ìœ í‹¸ë¦¬í‹°í™” ê°€ëŠ¥ì„±

## ë¶„ì„ í”„ë¡œì„¸ìŠ¤

### 1ë‹¨ê³„: íŒŒì¼ ìˆ˜ì§‘
```bash
find src -type f \( -name "*.ts" -o -name "*.tsx" -o -name "*.js" \)
```

### 2ë‹¨ê³„: íŒ¨í„´ ë¶„ì„

**í•¨ìˆ˜ ì¶”ì¶œ:**
```bash
grep -n "^export function\|^function\|^const.*=.*=>" src/**/*.ts
```

**ë§¤ì§ ê°’ ì°¾ê¸°:**
```bash
grep -n "['\"]\|0x\|[0-9]\{3,\}" src/**/*.ts | ë°˜ë³µë„ ê³„ì‚°
```

**import ë¶„ì„:**
```bash
grep -n "^import\|^from" src/**/*.ts | íŒ¨í„´ ê·¸ë£¹í™”
```

### 3ë‹¨ê³„: ì¤‘ë³µë„ ê³„ì‚°
- 2íšŒ ì´ìƒ: âš ï¸ ì£¼ì˜
- 3íšŒ ì´ìƒ: ğŸ”´ ë†’ìŒ (ë¦¬íŒ©í† ë§ ê¶Œê³ )
- 5íšŒ ì´ìƒ: ğŸ”´ğŸ”´ ë§¤ìš° ë†’ìŒ (ì¦‰ì‹œ ì •ë¦¬)

### 4ë‹¨ê³„: ê°œì„  ì œì•ˆ
- ì–´ë–¤ íŒŒì¼/í´ë”ë¡œ ì •ë¦¬í• ì§€ ì œì‹œ
- í•¨ìˆ˜ëª…, ìƒìˆ˜ëª… ì œì•ˆ
- ìœ í‹¸ë¦¬í‹° ìƒì„± ë°©ì•ˆ

## ì¶œë ¥ í˜•ì‹

```
## ğŸ” ì¤‘ë³µ ì½”ë“œ ë¶„ì„

### ğŸ“Š ë¶„ì„ ê²°ê³¼
- ìŠ¤ìº” íŒŒì¼: 25ê°œ
- ì´ ë¼ì¸ ìˆ˜: 2,345ì¤„
- ì¤‘ë³µë„ ë†’ì€ í•­ëª©: 12ê°œ

### âš ï¸ ì¤‘ë³µ ë°œê²¬ (ì‹¬ê°ë„ë³„)

#### ğŸ”´ ë†’ìŒ (3íšŒ ì´ìƒ)

**1. í•¨ìˆ˜ ì¤‘ë³µ: `handleClick`**
   - ì¤‘ë³µë„: 5íšŒ
   - ìœ„ì¹˜:
     - src/components/Button.ts:45
     - src/components/Card.ts:78
     - src/pages/Home.tsx:120
     - src/pages/About.tsx:65
     - src/utils/handlers.ts:30

   ğŸ’¡ **ê°œì„ ì•ˆ**: `src/utils/eventHandlers.ts` ìƒì„±
   ```typescript
   export const createClickHandler = (callback) => { ... }
   ```

---

**2. ë§¤ì§ ë¬¸ìì—´ ì¤‘ë³µ: `"#4a90e2"` (íŒŒë€ìƒ‰)**
   - ì¤‘ë³µë„: 8íšŒ
   - ìœ„ì¹˜:
     - website/css/landing.css:15
     - website/css/demo.css:42
     - src/themes/colors.ts:10
     - (ë‹¤ë¥¸ 5ê³³)

   ğŸ’¡ **ê°œì„ ì•ˆ**: CSS ë³€ìˆ˜ í†µí•©
   ```css
   :root {
     --color-primary: #4a90e2;
   }
   ```

---

**3. import íŒ¨í„´ ì¤‘ë³µ: `Phaser + Scene`**
   - ì¤‘ë³µë„: 4íšŒ
   - í•­ìƒ í•¨ê»˜ importë¨
   - ìœ„ì¹˜: src/scenes/*.ts

   ğŸ’¡ **ê°œì„ ì•ˆ**: ë² ì´ìŠ¤ í´ë˜ìŠ¤ ìƒì„±
   ```typescript
   // src/scenes/BaseScene.ts
   import Phaser from 'phaser';
   export class BaseScene extends Phaser.Scene { ... }
   ```

---

#### âš ï¸ ì¤‘ê°„ (2íšŒ)

**4. í•¨ìˆ˜ ì¤‘ë³µ: `debounce`**
   - ì¤‘ë³µë„: 2íšŒ
   - ìœ„ì¹˜:
     - src/utils/timing.ts:50
     - src/hooks/useSearch.ts:15

   ğŸ’¡ **ê°œì„ ì•ˆ**: í•˜ë‚˜ë¡œ í†µí•©í•˜ê±°ë‚˜ ì¬ì‚¬ìš©

---

### ğŸ“ˆ ë¦¬íŒ©í† ë§ ì˜í–¥ë„

| í•­ëª© | ì ˆê° | ìš°ì„ ìˆœìœ„ |
|------|------|---------|
| handleClick í•¨ìˆ˜í™” | ~20ì¤„ | â­â­â­ ë†’ìŒ |
| ìƒ‰ìƒ CSS ë³€ìˆ˜í™” | ~30ì¤„ | â­â­ ì¤‘ê°„ |
| BaseScene ì¶”ìƒí™” | ~50ì¤„ | â­â­â­ ë†’ìŒ |
| debounce í†µí•© | ~10ì¤„ | â­ ë‚®ìŒ |

**ì´ ì ˆê° ê°€ëŠ¥:** ~110ì¤„ (ì½”ë“œ ëŸ‰ 12% ê°ì†Œ)

---

### ğŸ’¡ ì¶”ì²œ ì•¡ì…˜

1. âœ… **ì¦‰ì‹œ** - handleClick í•¨ìˆ˜í™”, BaseScene ìƒì„±
2. â±ï¸ **ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸** - ìƒ‰ìƒ ì‹œìŠ¤í…œ ì •ë¦¬
3. ğŸ“‹ **ê²€í†  í•„ìš”** - debounce, ë‹¤ë¥¸ ìœ í‹¸ í†µí•©

### ğŸ”— ì°¸ê³ 
- SOLID: DRY(Don't Repeat Yourself) ì›ì¹™ ì ìš©
- ë³´ì•ˆ: í•˜ë“œì½”ë”©ëœ ì„¤ì •ê°’ ë¶„ë¦¬
- ì„±ëŠ¥: ë¶ˆí•„ìš”í•œ ì¤‘ë³µ ì œê±°ë¡œ ë²ˆë“¤ í¬ê¸° ê°ì†Œ
```

## ì£¼ì˜ì‚¬í•­

âš ï¸ **ìë™ ë³€ê²½ ì•ˆ í•¨** - ë¶„ì„ ê²°ê³¼ë§Œ ì œì‹œ
- ì‹¤ì œ ë¦¬íŒ©í† ë§ì€ ì‚¬ìš©ìê°€ íŒë‹¨ í›„ ìˆ˜í–‰
- ê° ì¤‘ë³µ í•­ëª©ë³„ ìœ„ì¹˜ ëª…í™•íˆ ì œì‹œ

## ì»¤ìŠ¤í„°ë§ˆì´ì§•

íŠ¹ì • íŒŒì¼ë§Œ ë¶„ì„:
```bash
/code:duplicate functions -- src/components
/code:duplicate strings -- website/css
```

ì œì™¸ íŒ¨í„´:
```bash
# node_modules, dist ìë™ ì œì™¸
# .git, build ìë™ ì œì™¸
```
